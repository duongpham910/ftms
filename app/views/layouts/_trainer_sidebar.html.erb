<div id="trainer-header">
  <header class="main-header">
    <%= link_to trainer_root_path, class: "logo" do %>
      <span class="logo-lg"><%= t :name_system %></span>
    <% end %>
    <nav class="navbar navbar-static-top" role="navigation">
      <ol class="breadcrumb pull-left">
        <%= render_breadcrumbs tag: :li, separator: "" %>
      </ol>
      <div class="navbar-custom-menu">
        <ul class="nav navbar-nav">
          <li>
            <%= link_to chats_path do %>
              <i class="fa fa-weixin" aria-hidden="true"></i>
              <%= t "chats.chat" %>
              <span class="label label-danger dropdown-label number-message"></span>
            <% end %>
          </li>
          <li class="dropdown messages-menu">
            <%= link_to update_notifications_path, class: "dropdown-toggle",
              data: {toggle: "dropdown"}, method: :patch, remote: true do %>
              <i class="fa fa-bell-o"></i>
              <span class="label label-danger dropdown-label number-notification"><%= not_seen_notification %></span>
            <% end %>
            <ul class="dropdown-menu">
              <li class="header">
                <%= t "layouts.notifications.notification" %></li>
              <li>
                <div id="slimScrollDiv">
                  <ul class="menu" id="slimscroll_admin">
                    <% current_user.user_notifications.select_notifications
                      .limit(10).each do |user_notification| %>
                      <%= render "shared/notification",
                        notification: user_notification.notification %>
                    <% end %>
                  </ul>
                </div>
              </li>
              <li class="footer">
                <%= link_to t("layouts.notifications.view_all"), notifications_path %>
              </li>
            </ul>
          </li>
          <li>
            <a href="#" data-toggle="control-sidebar" id="toggle-navbar">
              <i class="fa fa-gears"></i>
            </a>
          </li>
        </ul>
      </div>
    </nav>
  </header>

  <aside class="control-sidebar control-sidebar-dark">
    <div class="user-profile-navbar">
      <div class="image-user-profile">
        <%= link_to trainer_user_path(current_user) do %>
          <%= avatar_user_tag current_user, "img-circle", Settings.image_size_100 %>
        <% end %>
      </div>
      <div class="image-user-profile">
        <div>
          <%= link_to trainer_user_path(current_user) do %>
            <p><%= current_user.name %><i class="fa fa-pencil"></i></p>
          <% end %>
        </div>
        <div class="switch-role">
          <button class="btn btn-warning">
            <%= @namespace.capitalize %>
            <span class="caret"></span>
          </button>
          <ul hidden class="drop">
            <%= current_user.decorate.set_link_role %>
          </ul>
        </div>
      </div>
    </div>
    <ul class="sidebar-menu">
      <% if policy(controller: "courses", action: "index") %>
        <li>
          <%= link_to trainer_courses_path do %>
            <i class="fa fa-calendar"></i><span><%= t "layouts.courses" %></span>
          <% end %>
        </li>
      <% end %>
      <% if policy(controller: "subjects", action: "index") %>
        <li>
          <%= link_to trainer_subjects_path do %>
            <i class="fa fa-laptop"></i><span><%= t "layouts.subjects" %></span>
          <% end %>
        </li>
      <% end %>
      <% if current_user.has_function?("trainer/users", "index") %>
        <li>
          <%= link_to trainer_users_path do %>
            <i class="fa fa-users" aria-hidden="true"></i>
            <span><%= t "layouts.users" %></span>
          <% end %>
        </li>
      <% end %>
      <% if policy(controller: "roles", action: "index") ||
        policy(controller: "locations", action: "index")||
        policy(controller: "universities", action: "index")||
        policy(controller: "statuses", action: "index")||
        policy(controller: "user_types", action: "index") %>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <i class="fa fa-cogs" aria-hidden="true"></i>
            <span><%= t "layouts.system" %></span>
            <i class="fa fa-angle-left pull-right"></i>
          </a>
          <%= render "layouts/side_panel", objects: Settings.objects_system %>
        </li>
      <% end %>
      <% if policy(controller: "organization_charts", action: "index") ||
        policy(controller: "training_managements", action: "index") %>
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <i class="fa fa-sitemap" aria-hidden="true"></i>
            <span><%= t "layouts.training_schedule" %></span>
            <i class="fa fa-angle-left pull-right"></i>
          </a>
          <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dLabel">
            <% if policy(controller: "organization_charts", action: "index") %>
            <li>
              <%= link_to trainer_organization_charts_path do %>
                <span><%= t "layouts.organization_chart" %></span>
              <% end %>
            </li>
            <% end %>
            <% if policy(controller: "training_managements", action: "index") %>
            <li>
              <%= link_to trainer_training_managements_path do %>
                <span><%= t "layouts.training_management" %></span>
              <% end %>
            </li>
              <% end %>
          </ul>
        </li>
      <% end %>
      <% if policy(controller: "feed_backs", action: "index") %>
        <li>
          <%= link_to trainer_feed_backs_path do %>
            <i class="fa fa-question" aria-hidden="true"></i>
            <span><%= t "feed_backs.title" %></span>
          <% end %>
        </li>
      <% end %>
      <li class="li-logout">
        <%= link_to destroy_user_session_path, method: :delete do %>
          <i class="fa fa-backward"></i>
          <span><%= t "staticpages.logout" %></span>
        <% end %>
      </li>
    </ul>
  </aside>
  <div class="control-sidebar-bg"></div>
</div>
